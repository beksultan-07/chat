(this["webpackJsonpchat-M"]=this["webpackJsonpchat-M"]||[]).push([[0],{58:function(e,t,a){},59:function(e,t,a){},63:function(e,t,a){},66:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(4),c=a.n(n),s=a(30),r=a.n(s),i=(a(58),a(59),a(12)),u=a(13),o=a(11),l=(a(63),a(6));var j=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),r=Object(o.a)(s,2),j=r[0],h=r[1],b=Object(i.f)(),m=Object(u.b)(),O=Object(u.c)((function(e){return e}));return Object(n.useEffect)((function(){"/authentication"===b.location.pathname?c("Register"):O.auth?c("Log out"):c("Log in")}),[O.auth]),Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)("div",{className:"header__top",children:[Object(l.jsx)("a",{onClick:function(){return b.push("/")},className:"header__logo",children:"Logo"}),Object(l.jsxs)("div",{className:"header_btns",children:[Object(l.jsx)("button",{className:"btn header__btn",onClick:function(){return b.push("/settings")},children:"Settings"}),Object(l.jsx)("button",{id:"mn",className:"btn header__btn",onClick:function(){"/authentication"===b.location.pathname?(m({type:"headerBtn",value:!O.login}),h((function(e){return!e})),c(j?"Log in":"Register")):(m({type:"changeAuth",value:!1}),b.push("/authentication"))},children:a})]})]})})})};a(66),a(67);var h=function(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"text",name:"userName",className:"auth__inp",placeholder:"Your name and surname",onChange:function(t){return e.input__Value(t)}}),Object(l.jsx)("input",{type:"number",name:"userContact",className:"auth__inp",placeholder:"Your phone number",onChange:function(t){return e.input__Value(t)}}),Object(l.jsx)("input",{type:"email",name:"email",className:"auth__inp",placeholder:"Your email",onChange:function(t){return e.input__Value(t)}}),Object(l.jsx)("input",{type:"password",name:"password",className:"auth__inp",placeholder:"Password",onChange:function(t){return e.input__Value(t)}}),Object(l.jsx)("input",{type:"password",name:"password2",className:"auth__inp",placeholder:"Password",onChange:function(t){return e.input__Value(t)}})]})};var b=function(e){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"email",name:"email",className:"auth__inp",placeholder:"Your email",onChange:function(t){return e.input__Value(t)}}),Object(l.jsx)("input",{type:"password",name:"password",className:"auth__inp",placeholder:"Password",onChange:function(t){return e.input__Value(t)}})]})},m=a(36);a(69);m.a.initializeApp({apiKey:"AIzaSyC6Ld9ArE4EOUAog2_3ZHGfI5IfrFfY2X0",authDomain:"chat-c2a88.firebaseapp.com",projectId:"chat-c2a88",storageBucket:"chat-c2a88.appspot.com",messagingSenderId:"381376304969",appId:"1:381376304969:web:22bea870410a8157a3ec98",measurementId:"G-J0506CHD9W"});m.a.auth();var O=m.a,d=a(51),p=a.n(d).a.create({baseURL:"https://chat-c2a88-default-rtdb.firebaseio.com"});var f=function(){return Object(l.jsx)("div",{className:"loader-wrap",children:Object(l.jsxs)("div",{className:"loader",children:[Object(l.jsx)("div",{className:"loader-inner triangle-skew-spin",children:Object(l.jsx)("div",{})}),Object(l.jsx)("span",{className:"tooltip",children:Object(l.jsx)("p",{})})]})})};var g=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),r=Object(o.a)(s,2),j=r[0],m=r[1],d=Object(n.useState)(""),g=Object(o.a)(d,2),A=g[0],x=g[1],v=Object(n.useState)(""),_=Object(o.a)(v,2),N=_[0],C=_[1],E=Object(n.useState)(""),y=Object(o.a)(E,2),w=y[0],I=y[1],k=Object(n.useState)([]),S=Object(o.a)(k,2),B=S[0],L=S[1],F=Object(n.useState)(""),Y=Object(o.a)(F,2),D=Y[0],Q=Y[1],U=Object(n.useState)([]),V=Object(o.a)(U,2),W=V[0],H=V[1],G=Object(n.useState)(),K=Object(o.a)(G,2),M=K[0],P=K[1],T=Object(n.useState)(),J=Object(o.a)(T,2),z=J[0],X=J[1],Z=Object(u.c)((function(e){return e})),R=Object(u.b)(),q=Object(i.f)();function $(e){"userName"===e.target.name?c(e.target.value):"userContact"===e.target.name?m(e.target.value):"email"===e.target.name?x(e.target.value):"password"===e.target.name?C(e.target.value):I(e.target.value)}return Object(n.useEffect)((function(){Z.login?(Q("Log in"),H([Object(l.jsx)(b,{input__Value:$},"1")])):(Q("Register"),H([Object(l.jsx)(h,{input__Value:$},"1")])),p.get("/users.json").then((function(e){X(Object.keys(e.data).length)}))}),[Z.login]),Object(l.jsxs)("section",{className:"auth",children:[B,Object(l.jsx)("h3",{className:"auth__title",children:D}),M,Object(l.jsxs)("form",{className:"auth__form",children:[W,Object(l.jsx)("div",{className:"auth__control__btns",children:Object(l.jsx)("button",{name:"sign in",className:"auth__btn btn",onClick:function(e){return function(e){L([Object(l.jsx)(f,{})]),e.preventDefault(),"Register"===e.target.innerText?""!==a&&""!==j&&""!==A&&""!==N&&""!==w?N!=w?(P([Object(l.jsx)("h3",{className:"auth__error",children:"The specified passwords do not match"})]),L([])):O.auth().createUserWithEmailAndPassword(A,N).then((function(e){R({type:"changeAuth",value:!0}),R({type:"userEmail",value:A});var t={id:z,name:a,phone:j,email:A};p.post("/users.json",t).finally((function(){q.push("/"),L([])}))})).catch((function(e){L([]),P(Object(l.jsx)("h3",{className:"auth__error",children:e.message}))})):(L([]),P([Object(l.jsx)("h3",{className:"auth__error",children:"You forgot to fill in one field"})])):"Log in"===e.target.innerText&&(""!==A&&""!==N?O.auth().signInWithEmailAndPassword(A,N).then((function(e){R({type:"userEmail",value:A}),R({type:"changeAuth",value:!0}),L([]),q.push("/")})).catch((function(e){L([]),P(Object(l.jsx)("h3",{className:"auth__error",children:e.message}))})):(L([]),P([Object(l.jsx)("h3",{className:"auth__error",children:"Incorrect login or password"})])))}(e)},children:D})})]})]})};a(89);var A=function(e){return Object(l.jsxs)("li",{className:"user",onClick:function(t){return e.clickUser(t)},children:[Object(l.jsx)("div",{className:"img-wrap",children:Object(l.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAgMAAACJFjxpAAAADFBMVEXFxcX////p6enW1tbAmiBwAAAFiElEQVR4AezAgQAAAACAoP2pF6kAAAAAAAAAAAAAAIDbu2MkvY0jiuMWWQoUmI50BB+BgRTpCAz4G6C8CJDrC3AEXGKPoMTlYA/gAJfwETawI8cuBs5Nk2KtvfiLW+gLfK9m+r3X82G653+JP/zjF8afP1S//y+An4/i51//AsB4aH+/QPD6EQAY/zwZwN8BAP50bh786KP4+VT+3fs4/noigEc+jnHeJrzxX+NWMDDh4g8+EXcnLcC9T8U5S/CdT8bcUeBEIrwBOiI8ki7Ba5+NrePgWUy89/nYyxQ8Iw3f+pWY4h1gb3eAW7sDTPEOsLc7wK1TIeDuDB+I/OA1QOUHv/dFsZQkhKkh4QlEfOULYz2nGj2/Nn1LmwR/86VxlCoAW6kCsHRGANx1RgCMo5Qh2EsZgrXNQZZShp5Liv7Il8eIc5C91EHY2hxk6bwYmNscZIReDBwtCdhbErC1JGBpScBcOgFMLQsZMQs5Whayd+UQsLYsZGlZyNyykKllISNmIUfAwifw8NXvTojAjGFrdYi11SGWVoeYWx1i6lmQCiEjFkKOVgjZ+xxIhZCtFULWHkCqxCw9gNQKmP9vNHzipdEPrRcxtVbAeDkAvve0iM2QozVD9hfjhp4YP/UrkJYDbD2AtBxgfSkAvvHEeNcDSAsilgtAWxIy91J8AXgZAJ5e33+4tuACcAG4AFwALgBXRXQB6AFcB5MXAuA6nl9/0Vx/011/1V5/1/dfTPJvRtdnu/zL6beeFO/7r+fXBYbrEkt/j+i6ytXfpuvvE/ZXOnsA/a3a/l5xf7O6v1t+Xe/vOyz6HpO8yyboM8o7rfJes77bru83THk48p7TvOs27zvOO6/73vO++z7l4cgnMPQzKPopHC0N9noSSz6LJp/Gk88jyicy5TOp6qlc+VyyfDJbPpuuns6XzyfMJzTmMyrrKZ35nNJ8Ums+q7af1tvPK+4nNodEnPKp3fnc8npyez67/qVP7+/fL8hfcMjfsOhf8cjfMclfcnn9+BkOnLECP8Q58OYeyJ40eoyF6Ee/En/JHlP6mIlRVXprF4BxtAvArV0AxtEuALd2ARhHuwDc2gVgHPX/hFv9fMBddjIGeKg/WCxlCsI46u+Ga5mCcJd+sIG9UkGAW32ZbApFAHhod4Bb3eo04h3god0BbiUHYApVCNjbHeBW+QDAXT4a7qg7r7e214057vg0QhkEHkoSwq0kIdydXw4/Q3H8hjYJ3vL0WConBJhCHQaOToeBrU0BljYFmEoVgHGUKgAPnREAt84IgLuqFgAYSUEOAHszDwuAtSkHAZhLGYIpdCLgKGUIHtocZG1zkLmUIRhxDnJU1RDA1uYga5uDzKUOwhTnIEfnxcDe5iBrcyQAYGlzkKkUYhhxDrKXQgxbSwLWUohhbknA1JKAEZOAvSUBW0sC1pYEzC0JmFoSMMJyCDhaFrK3JGDtyiFgaVnI3LKQqWUhI2YhR8tC9paFrC0LWVoWMrcsZGpZyIhZyNGykL2rSIGtlQHWVgZYWhlgbmWAqZUBRiwDHK0MsLcywNbKAGsOoNUhllaHmFsdYmp1iBHrEEerQ+w5gFYI2VodYm11iKXVIeYcQCuETK0QMmIh5MgBtELI3gohWyuErDmAVolZWiFkzgG0SszUKjGjfj6gVmKOVonZcwCtFbB9HQC+ozWDbz1bvGu9iKW1AuYcQOtFTLEX1GbIaFegN0OOHEBrhuw5gNYM2XIArRuz5gDacoB3bTnAEktxXQ4wfw0AvveM8b4tiJjSJOwLIsbXsAKeNeKCiOO3D+AVbUl0AfjGs8ZPbUnIdgFoa1LWC0BblfMuB9AeC1j6gqQE0J9LmC8AOYD2ZMb7i4bt2ZTpWoHfPoB7Tj2fXzT8N1X41vkq/QHOAAAAAElFTkSuQmCC",alt:""})}),Object(l.jsxs)("div",{className:"user__info",children:[Object(l.jsx)("h4",{className:"user__info__title user-name",children:e.name}),Object(l.jsx)("h5",{className:"user__info__title user-phone",children:e.phone}),Object(l.jsx)("h5",{className:"user__info__title user-email",children:e.email})]})]})};var x=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),r=Object(o.a)(s,2),j=r[0],h=r[1],b=Object(u.c)((function(e){return e})),m=Object(i.f)();function O(){p.get("/users.json").then((function(e){h([]);var t=[];for(var a in e.data)e.data[a].email!=b.userEmail&&t.push(e.data[a]);c(t),O()}))}function d(e){try{var t=e.target.children[1].children[2].innerText;m.push("/chat",{params:t})}catch(a){console.log(a)}}return Object(n.useEffect)((function(){h([Object(l.jsx)(f,{})]),b.auth?O():m.push("/authentication")}),[]),Object(l.jsxs)("section",{className:"contacts",children:[j,Object(l.jsx)("ul",{className:"users",children:a.map((function(e,t){return Object(l.jsx)(A,{name:e.name,phone:e.phone,email:e.email,clickUser:d},t)}))})]})},v=a(21);a(90);var _=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),r=Object(o.a)(s,2),j=r[0],h=r[1],b=Object(n.useState)(),m=Object(o.a)(b,2),O=m[0],d=m[1],g=Object(n.useState)([]),A=Object(o.a)(g,2),x=A[0],_=A[1],N=Object(u.c)((function(e){return e})),C=Object(i.g)();function E(){p.get("/messages.json").then((function(e){h([]),_([]),d(Object.keys(e.data).length);var t=function(t){var a=e.data[t][0];(a.from===N.userEmail&&a.to===C.state.params||a.from===C.state.params&&a.to===N.userEmail)&&(a.from===N.userEmail?h((function(e){return[].concat(Object(v.a)(e),[Object(l.jsx)("p",{className:"massage mySms",children:a.sms},a.id)])})):h((function(e){return[].concat(Object(v.a)(e),[Object(l.jsx)("p",{className:"massage",children:a.sms},a.id)])})))};for(var a in e.data)t(a)})).finally((function(){E()}))}return Object(n.useEffect)((function(){_([Object(l.jsx)(f,{})]),h([]),E()}),[]),Object(l.jsxs)("section",{className:"chat",children:[x,Object(l.jsx)("h4",{className:"talking-user",children:C.state.params}),Object(l.jsx)("div",{className:"chat__massages",children:j}),Object(l.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),_([Object(l.jsx)(f,{})]);var t=[];t.push({id:O,sms:a,from:N.userEmail,to:C.state.params}),p.post("/messages.json",t).finally((function(){_([]),c("")}))}(e)},className:"chat__form",children:[Object(l.jsx)("input",{value:a,type:"text",placeholder:"message",className:"chat__input",onChange:function(e){return c(e.target.value)}}),Object(l.jsx)("button",{className:"send__btn btn",children:"send"})]})]})};var N=function(){return Object(l.jsx)("section",{className:"settings",children:"This page is making . . ."})};var C=function(){var e=Object(u.c)((function(e){return e})),t=Object(i.f)();return Object(n.useEffect)((function(){e.auth||t.push("/authentication")}),[e.auth]),Object(l.jsxs)("div",{className:"wrap",children:[Object(l.jsx)(j,{}),Object(l.jsx)("div",{className:"container",children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",component:x}),Object(l.jsx)(i.a,{exact:!0,path:"/authentication",component:g}),Object(l.jsx)(i.a,{exact:!0,path:"/chat",component:_}),Object(l.jsx)(i.a,{exact:!0,path:"/settings",component:N})]})})]})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,92)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))},y=a(24),w=a(26),I={auth:!1,userEmail:null,userFirebaseId:null,login:!0},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"changeAuth":return Object(w.a)(Object(w.a)({},e),{},{auth:t.value});case"headerBtn":return Object(w.a)(Object(w.a)({},e),{},{login:t.value});case"userEmail":return Object(w.a)(Object(w.a)({},e),{},{userEmail:t.value});default:return e}},S=a(35),B=a(52),L=a(53),F=Object(S.createStore)(k,Object(L.composeWithDevTools)(Object(S.applyMiddleware)(B.a)));r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(y.a,{children:Object(l.jsx)(u.a,{store:F,children:Object(l.jsx)(C,{})})})}),document.getElementById("root")),E()}},[[91,1,2]]]);
//# sourceMappingURL=main.9cce6552.chunk.js.map